<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DiceToDecide</title>

<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
</head>

<body>

<nav>
  <div class="nav-links">
    <a href="#">Home</a>
    <a href="#">About</a>
    <a href="#">Privacy</a>
    <a href="#">Contact</a>
  </div>
</nav>

<div class="layout">

  <div class="intro">
    <h2>Can't Decide?</h2>
    <h2 class="gradient">Let the Dice Decide.</h2>
    <p>Add your choices and let randomness choose fairly.</p>
  </div>

  <div class="card">

    <h1 class="title">DiceToDecide</h1>

    <div class="input-row">
      <input type="text" id="optionInput" placeholder="Enter option">
      <button onclick="addOption()">+ Add</button>
    </div>

    <div id="options" class="options"></div>

    <button id="resetBtn" class="reset hidden" onclick="resetGame()">Reset Game</button>

    <div class="modes">
      <button class="mode active" onclick="setMode(1,this)">1</button>
      <button class="mode" onclick="setMode(3,this)">3</button>
      <button class="mode" onclick="setMode(5,this)">5</button>
    </div>

    <!-- Dice -->
    <div class="dice-wrapper" onclick="rollDice()">
      <div id="dice" class="dice">
        <div class="pip p1"></div>
        <div class="pip p2"></div>
        <div class="pip p3"></div>
        <div class="pip p4"></div>
        <div class="pip p5"></div>
      </div>
    </div>

    <div id="turns" class="turns"></div>
    <div id="winner" class="winner"></div>

  </div>

</div>

<script>

let options = [];
let mode = 1;
let currentTurn = 0;
let results = [];

// Add Option
function addOption(){
  const input = document.getElementById("optionInput");
  if(input.value.trim() === "") return;

  options.push(input.value.trim());
  input.value = "";
  renderOptions();
  document.getElementById("resetBtn").classList.remove("hidden");
}

// Render Options
function renderOptions(){
  const box = document.getElementById("options");
  box.innerHTML = "";
  options.forEach((opt,i)=>{
    box.innerHTML += `<div class="pill">${opt}<span onclick="removeOption(${i})">√ó</span></div>`;
  });
}

// Remove Option
function removeOption(i){
  options.splice(i,1);
  renderOptions();
}

// Set Mode
function setMode(m,btn){
  mode = m;
  currentTurn = 0;
  results = [];
  document.getElementById("turns").innerHTML = "";
  document.getElementById("winner").innerHTML = "";
  document.querySelectorAll(".mode").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

// Roll Dice (One Click = One Turn)
function rollDice(){

  if(options.length === 0) return;
  if(currentTurn >= mode) return;

  const dice = document.getElementById("dice");
  dice.classList.add("rolling");

  setTimeout(()=>{
    dice.classList.remove("rolling");

    let pick = options[Math.floor(Math.random()*options.length)];
    results.push(pick);
    currentTurn++;

    document.getElementById("turns").innerHTML +=
      `<div class="turn-pill">${currentTurn}/${mode} ‚Üí ${pick}</div>`;

    if(currentTurn === mode){
      showWinner();
    }

  },600);
}

// Show Winner After Final Turn
function showWinner(){
  let counts = {};
  results.forEach(r=>counts[r]=(counts[r]||0)+1);

  let winner = Object.keys(counts)
    .reduce((a,b)=>counts[a]>counts[b]?a:b);

  document.getElementById("winner").innerHTML =
    `<div class="winner-pill">üèÜ Winner: ${winner}</div>`;
}

// Reset Game
function resetGame(){
  options = [];
  currentTurn = 0;
  results = [];
  document.getElementById("options").innerHTML = "";
  document.getElementById("turns").innerHTML = "";
  document.getElementById("winner").innerHTML = "";
  document.getElementById("resetBtn").classList.add("hidden");
}

</script>

</body>
</html>